/* head.load - v1.0.3 */
(function(q,X){function W(){}function Y(b,d){if(b){typeof b=="object"&&(b=[].slice.call(b));for(var a=0,c=b.length;a<c;a++){d.call(b,b[a],a)}}}function I(b,a){var c=Object.prototype.toString.call(a).slice(8,-1);return a!==X&&a!==null&&c===b}function T(a){return I("Function",a)}function Ad(a){return I("Array",a)}function P(b){var a=b.split("/"),d=a[a.length-1],c=d.indexOf("?");return c!==-1?d.substring(0,c):d}function Ae(a){(a=a||W,a._done)||(a(),a._done=1)}function K(b,d,a,g){var h=typeof b=="object"?b:{test:b,success:!d?!1:Ad(d)?d:[d],failure:!a?!1:Ad(a)?a:[a],callback:g||W},c=!!h.test;return c&&!!h.success?(h.success.push(h.callback),m.load.apply(null,h.success)):c||!h.failure?g():(h.failure.push(h.callback),m.load.apply(null,h.failure)),m}function V(b){var d={},a,c;if(typeof b=="object"){for(a in b){!b[a]||(d={name:a,url:b[a]})}}else{d={name:P(b),url:b}}return(c=Ab[d.name],c&&c.url===d.url)?c:(Ab[d.name]=d,d)}function R(a){a=a||Ab;for(var b in a){if(a.hasOwnProperty(b)&&a[b].state!==z){return !1}}return !0}function B(a){a.state=O;Y(a.onpreload,function(b){b.call()})}function H(a){a.state===X&&(a.state=J,a.onpreload=[],A({url:a.url,type:"cache"},function(){B(a)}))}function M(){var b=arguments,c=b[b.length-1],a=[].slice.call(b,1),d=a[0];return(T(c)||(c=null),Ad(b[0]))?(b[0].push(c),m.load.apply(null,b[0]),m):(d?(Y(a,function(e){T(e)||!e||H(V(e))}),Aa(V(b[0]),T(d)?d:function(){m.load.apply(null,a)})):Aa(V(b[0])),m)}function L(){var b=arguments,c=b[b.length-1],a={};return(T(c)||(c=null),Ad(b[0]))?(b[0].push(c),m.load.apply(null,b[0]),m):(Y(b,function(d){d!==c&&(d=V(d),a[d.name]=d)}),Y(b,function(d){d!==c&&(d=V(d),Aa(d,function(){R(a)&&Ae(c)}))}),m)}function Aa(a,b){if(b=b||W,a.state===z){b();return}if(a.state===F){m.ready(a.name,b);return}if(a.state===J){a.onpreload.push(function(){Aa(a,b)});return}a.state=F;A(a,function(){a.state=z;b();Y(j[a.name],function(c){Ae(c)});x&&R()&&Y(j.ALL,function(c){Ae(c)})})}function N(a){a=a||"";var b=a.split("?")[0].split(".");return b[b.length-1].toLowerCase()}function A(c,k){function a(e){e=e||q.event;d.onload=d.onreadystatechange=d.onerror=null;k()}function l(e){e=e||q.event;(e.type==="load"||/loaded|complete/.test(d.readyState)&&(!S.documentMode||S.documentMode<9))&&(q.clearTimeout(c.errorTimeout),q.clearTimeout(c.cssTimeout),d.onload=d.onreadystatechange=d.onerror=null,k())}function b(){if(c.state!==z&&c.cssRetries<=20){for(var e=0,h=S.styleSheets.length;e<h;e++){if(S.styleSheets[e].href===d.href){l({type:"load"});return}}c.cssRetries++;c.cssTimeout=q.setTimeout(b,250)}}var d,g,n;k=k||W;g=N(c.url);g==="css"?(d=S.createElement("link"),d.type="text/"+(c.type||"css"),d.rel="stylesheet",d.href=c.url,c.cssRetries=0,c.cssTimeout=q.setTimeout(b,500)):(d=S.createElement("script"),d.type="text/"+(c.type||"javascript"),d.src=c.url);d.onload=d.onreadystatechange=l;d.onerror=a;d.async=!1;d.defer=!1;c.errorTimeout=q.setTimeout(function(){a({type:"timeout"})},7000);n=S.head||S.getElementsByTagName("head")[0];n.insertBefore(d,n.lastChild)}function D(){for(var b,c=S.getElementsByTagName("script"),a=0,d=c.length;a<d;a++){if(b=c[a].getAttribute("data-headjs-load"),!!b){m.load(b);return}}}function Ac(a,f){var d,b,c;return a===S?(x?Ae(f):Ag.push(f),m):(T(a)&&(f=a,a="ALL"),Ad(a))?(d={},Y(a,function(e){d[e]=Ab[e];m.ready(e,function(){R(d)&&Ae(f)})}),m):typeof a!="string"||!T(f)?m:(b=Ab[a],b&&b.state===z||a==="ALL"&&R()&&x)?(Ae(f),m):(c=j[a],c?c.push(f):c=j[a]=[f],m)}function Q(){if(!S.body){q.clearTimeout(m.readyTimeout);m.readyTimeout=q.setTimeout(Q,50);return}x||(x=!0,D(),Y(Ag,function(a){Ae(a)}))}function Z(){S.addEventListener?(S.removeEventListener("DOMContentLoaded",Z,!1),Q()):S.readyState==="complete"&&(S.detachEvent("onreadystatechange",Z),Q())}var S=q.document,Ag=[],j={},Ab={},G="async" in S.createElement("script")||"MozAppearance" in S.documentElement.style||q.opera,x,Af=q.head_conf&&q.head_conf.head||"head",m=q[Af]=q[Af]||function(){m.ready.apply(null,arguments)},J=1,O=2,F=3,z=4,U;if(S.readyState==="complete"){Q()}else{if(S.addEventListener){S.addEventListener("DOMContentLoaded",Z,!1),q.addEventListener("load",Q,!1)}else{S.attachEvent("onreadystatechange",Z);q.attachEvent("onload",Q);U=!1;try{U=!q.frameElement&&S.documentElement}catch(E){}U&&U.doScroll&&function C(){if(!x){try{U.doScroll("left")}catch(a){q.clearTimeout(m.readyTimeout);m.readyTimeout=q.setTimeout(C,50);return}Q()}}()}}m.load=m.js=G?L:M;m.test=K;m.ready=Ac;m.ready(S,function(){R()&&Y(j.ALL,function(a){Ae(a)});m.feature&&m.feature("domloaded",!0)})})(window);